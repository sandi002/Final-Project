"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4034],{4034:(S,f,l)=>{l.r(f),l.d(f,{Tab2PageModule:()=>I});var g=l(1325),p=l(8371),u=l(6814),m=l(95),d=l(5861),k=l(1273),_=l(590),t=l(6689),x=l(492),b=l(3251),T=l(6465),Z=l(2090),h=l(5597);function j(e,c){1&e&&(t.TgZ(0,"div",10)(1,"div",11)(2,"div",12),t._UZ(3,"img",13),t.qZA(),t._uU(4," Belum ada Transaksi "),t.qZA()())}function C(e,c){1&e&&(t.TgZ(0,"div",14)(1,"div",15),t._uU(2,"Produk Fisik"),t.qZA(),t._UZ(3,"div",16),t.qZA())}function P(e,c){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.harga)}}function M(e,c){1&e&&(t.TgZ(0,"div",37),t._uU(1,"stok habis"),t.qZA())}const v=function(e){return{"background-image":e}};function y(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"ion-item",19)(1,"div",20),t._UZ(2,"div",21),t.TgZ(3,"div",22)(4,"div",11),t._uU(5),t.qZA(),t.TgZ(6,"div",23),t._uU(7),t.qZA(),t.TgZ(8,"div",24),t._UZ(9,"fa-icon",25),t._uU(10),t.qZA(),t.YNc(11,P,2,1,"div",26),t.YNc(12,M,2,0,"div",27),t.TgZ(13,"div",23),t._uU(14),t.qZA(),t.TgZ(15,"div",20)(16,"div",28)(17,"div",29)(18,"div",30)(19,"ion-button",31)(20,"fa-icon",32),t.NdJ("click",function(){const o=t.CHM(n).index,s=t.oxw(2);return t.KtG(s.kurang(o))}),t.qZA()()(),t.TgZ(21,"div",28)(22,"ion-input",33),t.NdJ("ngModelChange",function(a){const s=t.CHM(n).$implicit;return t.KtG(s.jumlah=a)}),t.qZA()(),t.TgZ(23,"div",30)(24,"ion-button",31)(25,"fa-icon",32),t.NdJ("click",function(){const o=t.CHM(n).index,s=t.oxw(2);return t.KtG(s.tambah(o))}),t.qZA()()()()(),t.TgZ(26,"div",28)(27,"div",34),t.NdJ("click",function(){const o=t.CHM(n).$implicit,s=t.oxw(2);return t.KtG(s.hapusKeranjang(o.id))}),t._UZ(28,"fa-icon",35),t._uU(29," hapus "),t.qZA()()()()()()}if(2&e){const n=c.$implicit,i=t.oxw(2);t.xp6(2),t.MGl("routerLink","/produks/",n.idproduk,""),t.Q6J("ngStyle",t.VKq(12,v,"url("+n.foto+")")),t.xp6(3),t.Oqu(n.nama),t.xp6(2),t.Oqu(n.variasi),t.xp6(3),t.hij(" \xa0",n.gudang,""),t.xp6(1),t.Q6J("ngIf",n.stok>=n.jumlah),t.xp6(1),t.Q6J("ngIf",n.jumlah>n.stok),t.xp6(2),t.Oqu(n.keterangan),t.xp6(6),t.Q6J("icon",i.minus),t.xp6(2),t.Q6J("ngModel",n.jumlah),t.xp6(3),t.Q6J("icon",i.plus),t.xp6(3),t.Q6J("icon",i.trash)}}function O(e,c){if(1&e&&(t.TgZ(0,"ion-list",17),t.YNc(1,y,30,14,"ion-item",18),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.items)}}function A(e,c){1&e&&(t.TgZ(0,"div",38),t._uU(1," apabila barang yang ada di keranjang berasal dari lebih banyak gudang, maka yang akan diproses adalah sesuai gudang dari produk di keranjang paling atas "),t.qZA())}function w(e,c){if(1&e&&(t.TgZ(0,"div",39)(1,"div",28)(2,"div",40),t._uU(3,"Total Harga"),t.qZA(),t.TgZ(4,"div",41),t._uU(5),t.qZA()(),t.TgZ(6,"div",28)(7,"ion-button",42),t._uU(8,"Bayar Sekarang"),t.qZA()()()),2&e){const n=t.oxw();t.xp6(5),t.hij("Rp ",n.total,"")}}function J(e,c){1&e&&(t.TgZ(0,"div",14)(1,"div",15),t._uU(2,"Produk Digital"),t.qZA(),t._UZ(3,"div",16),t.qZA())}function q(e,c){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.harga)}}function U(e,c){1&e&&(t.TgZ(0,"div",37),t._uU(1,"stok habis"),t.qZA())}function K(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"ion-item",19)(1,"div",20),t._UZ(2,"div",21),t.TgZ(3,"div",22)(4,"div",11),t._uU(5),t.qZA(),t.TgZ(6,"div",23),t._uU(7),t.qZA(),t.YNc(8,q,2,1,"div",26),t.YNc(9,U,2,0,"div",27),t.TgZ(10,"div",23),t._uU(11),t.qZA(),t.TgZ(12,"div",20)(13,"div",28)(14,"div",29)(15,"div",30)(16,"ion-button",31)(17,"fa-icon",32),t.NdJ("click",function(){const o=t.CHM(n).index,s=t.oxw(2);return t.KtG(s.kurangDigital(o))}),t.qZA()()(),t.TgZ(18,"div",28)(19,"ion-input",33),t.NdJ("ngModelChange",function(a){const s=t.CHM(n).$implicit;return t.KtG(s.jumlah=a)}),t.qZA()(),t.TgZ(20,"div",30)(21,"ion-button",31)(22,"fa-icon",32),t.NdJ("click",function(){const o=t.CHM(n).index,s=t.oxw(2);return t.KtG(s.tambahDigital(o))}),t.qZA()()()()(),t.TgZ(23,"div",28)(24,"div",34),t.NdJ("click",function(){const o=t.CHM(n).$implicit,s=t.oxw(2);return t.KtG(s.hapusKeranjang(o.id))}),t._UZ(25,"fa-icon",35),t._uU(26," hapus "),t.qZA()()()()()()}if(2&e){const n=c.$implicit,i=t.oxw(2);t.xp6(2),t.MGl("routerLink","/produks/",n.idproduk,""),t.Q6J("ngStyle",t.VKq(11,v,"url("+n.foto+")")),t.xp6(3),t.Oqu(n.nama),t.xp6(2),t.Oqu(n.variasi),t.xp6(1),t.Q6J("ngIf",n.stok>=n.jumlah),t.xp6(1),t.Q6J("ngIf",n.jumlah>n.stok),t.xp6(2),t.Oqu(n.keterangan),t.xp6(6),t.Q6J("icon",i.minus),t.xp6(2),t.Q6J("ngModel",n.jumlah),t.xp6(3),t.Q6J("icon",i.plus),t.xp6(3),t.Q6J("icon",i.trash)}}function N(e,c){if(1&e&&(t.TgZ(0,"ion-list",17),t.YNc(1,K,27,13,"ion-item",18),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.digital)}}function Q(e,c){if(1&e&&(t.TgZ(0,"div",43)(1,"div",44)(2,"div",40),t._uU(3,"Total Harga"),t.qZA(),t.TgZ(4,"div",41),t._uU(5),t.qZA()(),t.TgZ(6,"div",44)(7,"ion-button",45),t._uU(8,"Bayar Sekarang"),t.qZA()()()),2&e){const n=t.oxw();t.xp6(5),t.hij("Rp ",n.totaldigital,"")}}let Y=(()=>{class e{getapi;alert;router;loading;postapi;events;keranjang;items=[];digital=[];plus=_.r8p;minus=_.Kl4;trash=_.$aW;total="0";totaldigital="0";notifgudang=!1;constructor(n,i,a,o,s,r){this.getapi=n,this.alert=i,this.router=a,this.loading=o,this.postapi=s,this.events=r}ionViewWillEnter(){this.getdata().then(n=>{0!=(n=JSON.parse(n)).usrid?this.keranjangBelanja():this.alert.konfirmasi("Login","Silahkan login atau mendaftar terlebih dahulu").then(i=>{this.router.navigate(1==i.data?["/login"]:["/"])})},n=>{this.alert.konfirmasi("Login","Silahkan login atau mendaftar terlebih dahulu").then(i=>{this.router.navigate(1==i.data?["/login"]:["/"])})})}getdata(){return(0,d.Z)(function*(){return(yield k.u.get({key:"data"})).value})()}keranjangBelanja(){var n=this;return(0,d.Z)(function*(){const i=yield n.loading.create({message:"Loading...",spinner:"crescent"});yield i.present(),n.getapi.getKeranjang().subscribe(a=>{setTimeout(()=>{i.dismiss()},1e3),1==a.success?(n.items=a.fisik,n.digital=a.digital,n.total=a.totalfisik,n.totaldigital=a.totaldigital,n.notifgudang=a.gudangtot>1):(n.notifgudang=!1,n.items=[],n.digital=[],n.total=0,n.totaldigital=0)})})()}hapusKeranjang(n){this.alert.konfirmasi("Yakin menghapus?","Produk akan dihapus dari keranjang belanja Anda").then(i=>{1==i.data&&this.hapusSekarang(n)})}hapusSekarang(n){var i=this;return(0,d.Z)(function*(){const a=yield i.loading.create({message:"Menghapus produk...",spinner:"crescent"});yield a.present(),i.postapi.hapusKeranjang(n).subscribe(o=>{a.dismiss(),i.ionViewWillEnter(),i.events.publishData("keranjang")})})()}tambah(n){var i=this;return(0,d.Z)(function*(){const a=yield i.loading.create({message:"Mengupdate keranjang...",spinner:"crescent"});yield a.present();var o=parseFloat(i.items[n].jumlah)+1;i.postapi.updateKeranjang({update:i.items[n].id,jumlah:o}).subscribe(r=>{a.dismiss(),1==r.success?(i.items[n].jumlah=o,i.ionViewWillEnter()):(i.items[n].jumlah=r.stok,i.alert.presentAlert("Stok tidak cukup","Mohon maaf, stok produk saat ini tersisa "+r.stok+"pcs saja").then(()=>{i.ionViewWillEnter()})),i.events.publishData("keranjang")})})()}kurang(n){var i=this;return(0,d.Z)(function*(){const a=yield i.loading.create({message:"Mengupdate keranjang...",spinner:"crescent"});yield a.present();var o=parseFloat(i.items[n].jumlah)-1;o>0?i.postapi.updateKeranjang({update:i.items[n].id,jumlah:o}).subscribe(r=>{a.dismiss(),1==r.success?(i.items[n].jumlah=o,i.ionViewWillEnter()):(i.items[n].jumlah=r.stok,i.alert.presentAlert("Stok tidak cukup","Mohon maaf, stok produk saat ini tersisa "+r.stok+"pcs saja").then(()=>{i.ionViewWillEnter()})),i.events.publishData("keranjang")}):(a.dismiss(),i.hapusKeranjang(i.items[n].id))})()}tambahDigital(n){var i=this;return(0,d.Z)(function*(){const a=yield i.loading.create({message:"Mengupdate keranjang...",spinner:"crescent"});yield a.present();var o=parseFloat(i.digital[n].jumlah)+1;i.postapi.updateKeranjang({update:i.digital[n].id,jumlah:o}).subscribe(r=>{a.dismiss(),1==r.success?(i.digital[n].jumlah=o,i.ionViewWillEnter()):(i.digital[n].jumlah=r.stok,i.alert.presentAlert("Stok tidak cukup","Mohon maaf, stok produk saat ini tersisa "+r.stok+"pcs saja").then(()=>{i.ionViewWillEnter()})),i.events.publishData("keranjang")})})()}kurangDigital(n){var i=this;return(0,d.Z)(function*(){const a=yield i.loading.create({message:"Mengupdate keranjang...",spinner:"crescent"});yield a.present();var o=parseFloat(i.digital[n].jumlah)-1;o>0?i.postapi.updateKeranjang({update:i.digital[n].id,jumlah:o}).subscribe(r=>{a.dismiss(),1==r.success?(i.digital[n].jumlah=o,i.ionViewWillEnter()):(i.digital[n].jumlah=r.stok,i.alert.presentAlert("Stok tidak cukup","Mohon maaf, stok produk saat ini tersisa "+r.stok+"pcs saja").then(()=>{i.ionViewWillEnter()})),i.events.publishData("keranjang")}):(a.dismiss(),i.hapusKeranjang(i.digital[n].id))})()}static \u0275fac=function(i){return new(i||e)(t.Y36(x.L),t.Y36(b.c),t.Y36(p.F0),t.Y36(g.HT),t.Y36(T.E),t.Y36(Z.n))};static \u0275cmp=t.Xpm({type:e,selectors:[["app-tab2"]],decls:15,vars:8,consts:[[1,"ion-no-border"],["slot","start"],["color","primary","defaultHref","/tabs/tab1"],[1,"font-bold"],["class","kosong",4,"ngIf"],["class","segmen",4,"ngIf"],["lines","none",4,"ngIf"],["class","notif",4,"ngIf"],["class","btnwrap row mb20",4,"ngIf"],["class","btnwrap row mb50",4,"ngIf"],[1,"kosong"],[1,"title"],[1,"img-empty"],["src","/assets/img/empty.png"],[1,"segmen"],[1,"seg-title"],[1,"seg-line"],["lines","none"],["class","items","lines","none",4,"ngFor","ngForOf"],["lines","none",1,"items"],[1,"row"],[1,"col3","foto",3,"ngStyle","routerLink"],[1,"col9","right"],[1,"variasi"],[1,"gudang"],["icon","shipping-fast"],["class","jumlah",4,"ngIf"],["class","jumlah red",4,"ngIf"],[1,"col6"],[1,"row","jmlbtn"],[1,"col3"],["color","primary","expand","full"],[3,"icon","click"],["type","number","readonly","",3,"ngModel","ngModelChange"],[1,"icon","red",3,"click"],[1,"red",3,"icon"],[1,"jumlah"],[1,"jumlah","red"],[1,"notif"],[1,"btnwrap","row","mb20"],[1,"totaltitel"],[1,"total"],["expand","full","color","primary","routerLink","/cekout",1,"cekout"],[1,"btnwrap","row","mb50"],[1,"col6","mb40"],["expand","full","color","primary","routerLink","/cekoutdigital",1,"cekout"]],template:function(i,a){1&i&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5,"Keranjang Belanja"),t.qZA()()(),t.TgZ(6,"ion-content"),t.YNc(7,j,5,0,"div",4),t.YNc(8,C,4,0,"div",5),t.YNc(9,O,2,1,"ion-list",6),t.YNc(10,A,2,0,"div",7),t.YNc(11,w,9,1,"div",8),t.YNc(12,J,4,0,"div",5),t.YNc(13,N,2,1,"ion-list",6),t.YNc(14,Q,9,1,"div",9),t.qZA()),2&i&&(t.xp6(7),t.Q6J("ngIf",0==a.items.length&&0==a.digital.length),t.xp6(1),t.Q6J("ngIf",a.items.length>0&&a.digital.length>0),t.xp6(1),t.Q6J("ngIf",a.items),t.xp6(1),t.Q6J("ngIf",a.notifgudang),t.xp6(1),t.Q6J("ngIf",a.items.length>0),t.xp6(1),t.Q6J("ngIf",a.digital.length>0),t.xp6(1),t.Q6J("ngIf",a.digital),t.xp6(1),t.Q6J("ngIf",a.digital.length>0))},dependencies:[g.oU,g.YG,g.Sm,g.W2,g.Gu,g.pK,g.Ie,g.q_,g.wd,g.sr,g.as,g.cs,g.YI,u.sg,u.O5,u.PC,m.JJ,m.On,h.BN,p.rH],styles:["ion-toolbar[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]{--background: #eaf1ff}.kosong[_ngcontent-%COMP%]{padding:40px 20px;margin-top:20vh}.foto[_ngcontent-%COMP%]{height:20vw;background-size:cover;background-position:center center;overflow:hidden;border-radius:8px;-webkit-border-radius:8px;margin-left:0}ion-list[_ngcontent-%COMP%]{background:transparent}.items[_ngcontent-%COMP%]{border-radius:12px;background-color:#fff;width:94vw;margin:3vw auto}.items[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding:10px}.items[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:0;text-align:left;margin-bottom:4px;font-size:100%;font-family:appbold}.items[_ngcontent-%COMP%]   .variasi[_ngcontent-%COMP%]{color:#2c3e50;font-size:80%;text-align:left;margin-bottom:4px}.items[_ngcontent-%COMP%]   .jumlah[_ngcontent-%COMP%]{font-size:110%;font-family:appbold;text-align:left;margin-bottom:8px;color:var(--ion-color-primary)}.items[_ngcontent-%COMP%]   .col9[_ngcontent-%COMP%]{padding-left:20px}.items[_ngcontent-%COMP%]   .gudang[_ngcontent-%COMP%]{font-style:italic;color:var(--ion-color-primary);padding:0;font-size:80%;text-align:left}.btnwrap[_ngcontent-%COMP%]{padding:14px}.red[_ngcontent-%COMP%]{color:#c0392b;font-family:appmedium}.jmlbtn[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{text-align:center;--padding-top: 4px;--padding-bottom: 4px;font-family:appbold}.jmlbtn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-inline:0;--padding-top: 6px;--padding-bottom: 6px}.total[_ngcontent-%COMP%]{font-size:130%;font-family:appbold;color:var(--ion-color-primary)}.cekout[_ngcontent-%COMP%]{--padding-top: 16px;--padding-bottom: 16px}.segmen[_ngcontent-%COMP%]{padding:12px 0}.segmen[_ngcontent-%COMP%]   .seg-title[_ngcontent-%COMP%]{padding:4px 12px;background-color:var(--ion-color-danger);border-radius:20px;font-family:appbold;text-transform:uppercase;width:-moz-fit-content;width:fit-content;margin:auto;color:#fff}.segmen[_ngcontent-%COMP%]   .seg-line[_ngcontent-%COMP%]{border:1px solid var(--ion-color-danger);margin-top:-15px}.notif[_ngcontent-%COMP%]{width:94vw;background-color:#fff;border-radius:12px;padding:12px;margin:auto;font-size:90%;color:var(--ion-color-danger)}"]})}return e})(),I=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=t.oAB({type:e});static \u0275inj=t.cJS({imports:[g.Pc,u.ez,m.u5,h.uH,p.Bz.forChild([{path:"",component:Y}])]})}return e})()}}]);